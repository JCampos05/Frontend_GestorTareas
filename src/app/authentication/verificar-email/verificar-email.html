<div class="verification-container">
    <!-- Panel de Verificación -->
    <div class="verification-panel">
        <!-- Header -->
        <div class="header-section">
            <div class="brand-container" (click)="volverAlRegistro()">
                <div class="brand-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="3" y="3" width="7" height="7" rx="1" fill="white" />
                        <rect x="3" y="13" width="7" height="7" rx="1" fill="white" opacity="0.6" />
                        <rect x="13" y="3" width="7" height="7" rx="1" fill="white" opacity="0.6" />
                        <rect x="13" y="13" width="7" height="7" rx="1" fill="white" opacity="0.3" />
                    </svg>
                </div>
                <div class="brand-name">Taskeer</div>
            </div>
        </div>

        <!-- Contenido Principal -->
        <div class="content-section">
            <div class="verification-wrapper">
                <!-- Icono de Email -->
                <div class="email-icon">
                    <i class="fas fa-envelope-circle-check"></i>
                </div>

                <!-- Título -->
                <div class="verification-header">
                    <h2>Verifica tu email</h2>
                    <p>
                        Hemos enviado un código de verificación a<br>
                        <strong>{{ emailOfuscado }}</strong>
                    </p>
                </div>

                <!-- Mensajes -->
                <div class="message success-message" *ngIf="successMessage">
                    <i class="fas fa-circle-check"></i>
                    {{ successMessage }}
                </div>

                <div class="message error-message" *ngIf="errorMessage">
                    <i class="fas fa-exclamation-circle"></i>
                    {{ errorMessage }}
                </div>

                <!-- Inputs de Código -->
                <div class="code-inputs">
                    <input *ngFor="let digit of codigo; let i = index" type="text" maxlength="1" class="code-input"
                        [id]="'digit-' + i" [value]="digit" (input)="onDigitInput($event, i)"
                        (keydown)="onDigitKeyDown($event, i)" (paste)="i === 0 ? onPaste($event) : null"
                        [disabled]="isLoading" autocomplete="off">
                </div>

                <!-- Información de intentos -->
                <div class="attempts-info" *ngIf="errorMessage && intentosRestantes > 0">
                    <i class="fas fa-info-circle"></i>
                    Te quedan {{ intentosRestantes }} intento(s)
                </div>

                <!-- Botón Verificar -->
                <button type="button" class="verify-btn" (click)="verificarCodigo()" [disabled]="isLoading">
                    <i [class]="isLoading ? 'fas fa-spinner fa-spin' : 'fas fa-check-circle'"></i>
                    {{ isLoading ? 'Verificando...' : 'Verificar Código' }}
                </button>

                <!-- Reenviar Código -->
                <div class="resend-section">
                    <p class="resend-text">¿No recibiste el código?</p>

                    <button type="button" class="resend-btn" (click)="reenviarCodigo()"
                        [disabled]="isResending || cooldownSeconds > 0">
                        <i [class]="isResending ? 'fas fa-spinner fa-spin' : 'fas fa-rotate-right'"></i>
                        <span *ngIf="cooldownSeconds > 0">
                            Espera {{ cooldownSeconds }}s
                        </span>
                        <span *ngIf="cooldownSeconds === 0 && !isResending">
                            Reenviar código
                        </span>
                        <span *ngIf="isResending">
                            Enviando...
                        </span>
                    </button>
                </div>

                <!-- Volver -->
                <div class="back-section">
                    <button type="button" class="back-btn" (click)="volverAlRegistro()">
                        <i class="fas fa-arrow-left"></i>
                        Volver al registro
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Panel Decorativo -->
    <div class="decorative-panel">
        <div class="decorative-content">
            <div class="decorative-icon">
                <i class="fas fa-shield-halved"></i>
            </div>
            <h3>Seguridad Primero</h3>
            <p>
                Verificamos tu email para proteger tu cuenta y asegurar que solo tú tengas acceso a tus tareas.
            </p>

            <div class="security-features">
                <div class="security-item">
                    <i class="fas fa-lock"></i>
                    <span>Código encriptado</span>
                </div>
                <div class="security-item">
                    <i class="fas fa-clock"></i>
                    <span>Expira en 15 minutos</span>
                </div>
                <div class="security-item">
                    <i class="fas fa-user-shield"></i>
                    <span>Protección total</span>
                </div>
            </div>
        </div>
    </div>
</div>